

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Using printf Functions &mdash; CE C Toolchain v9.0-devel documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using File I/O Functions" href="fileio.html" />
    <link rel="prev" title="Frequently Asked Questions" href="faq.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> CE C Toolchain
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome to the CE C Toolchain!</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption"><span class="caption-text">Toolchain Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using printf Functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-s-the-deal-with-printf">What’s the deal with printf?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-the-printf-functions">Using the printf functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fileio.html">Using File I/O Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../libraries/index.html">CE C Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../headers/index.html">CE C Toolchain Specific Headers</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="makefile-options.html">Makefile Options</a></li>
</ul>
<p class="caption"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to the CE C Toolchain</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CE C Toolchain</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Using printf Functions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-printf-functions">
<span id="printf"></span><h1>Using printf Functions<a class="headerlink" href="#using-printf-functions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-s-the-deal-with-printf">
<h2>What’s the deal with printf?<a class="headerlink" href="#what-s-the-deal-with-printf" title="Permalink to this headline">¶</a></h2>
<p>The <cite>printf</cite> and related functions (<cite>sprintf</cite>, <cite>vsprintf</cite>, etc.) are based on a relatively <a class="reference external" href="https://github.com/CE-Programming/toolchain/commit/fb0f546f0daa3fa33f6cefe764b8f3dc328de991">small implementation</a>.
However, they contribute around 7.5KiB to the resultant program.
It is highly recommended to not use <cite>printf</cite> and related functions at all because of this.
If you insist on using these functions, this page details how to do so in the next section.</p>
<p>Alternatively, a limited <cite>sprintf</cite> implementation is baked into the OS which doesn’t add any extra size to the resultant program.
Only the ‘c’, ‘d’, ‘u’, ‘x’, and ‘s’ format specifiers will probably work.
To disable all other printf functions and use this <cite>sprintf</cite> implementation, add the following line to the Makefile:</p>
<div class="highlight-makefile notranslate"><div class="highlight"><pre><span></span><span class="nv">HAS_PRINTF</span> <span class="o">:=</span> NO
</pre></div>
</div>
<p>If you just need to convert a float to a string, which the OS sprintf does not support, you can utilize the following <cite>float2str</cite> function instead.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">float2str</span><span class="p">(</span><span class="kt">float</span> <span class="n">value</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">real_t</span> <span class="n">tmp_real</span> <span class="o">=</span> <span class="n">os_FloatToReal</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
    <span class="n">os_RealToStr</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tmp_real</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="using-the-printf-functions">
<h2>Using the printf functions<a class="headerlink" href="#using-the-printf-functions" title="Permalink to this headline">¶</a></h2>
<p>All the <cite>printf</cite> and related functions are defined in the standard <cite>stdio.h</cite> header, and can be used just as they would in any normal C program.</p>
<p>The output of character text is done via the <cite>outchar</cite> function, which is a special toolchain function that by default prints to the OS homescreen.
It’s prototype looks like this:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">outchar</span><span class="p">(</span><span class="kt">char</span> <span class="n">character</span><span class="p">);</span>
</pre></div>
</div>
<p>Reimplement this function in your program in any source file to change how characters are printed.
For example, a horrid implementation of this function might look like the one below, which just prints to the OS homescreen.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">outchar</span><span class="p">(</span><span class="kt">char</span> <span class="n">character</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="n">str</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="n">character</span><span class="p">,</span> <span class="sc">&#39;\0&#39;</span> <span class="p">};</span>

    <span class="n">os_PutStrFull</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As an additional note, the <cite>outchar</cite> function is used by the standard <cite>putchar</cite> and <cite>puts</cite> functions – even if you have disabled the other printf functions, these two will still work as expected.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="fileio.html" class="btn btn-neutral float-right" title="Using File I/O Functions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="faq.html" class="btn btn-neutral float-left" title="Frequently Asked Questions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2015-2020 CE Programming.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>